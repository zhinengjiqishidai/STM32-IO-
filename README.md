# STM32-IO-
STM32 IO口的八种模式使用小结
1 STM32的输入输出管脚有以下8种可能的配置：(4输入+2输出+2复用输出)

① 浮空输入_IN_FLOATING

② 带上拉输入_IPU

③ 带下拉输入_IPD

④ 模拟输入_AIN

⑤ 开漏输出_OUT_OD

⑥ 推挽输出_OUT_PP

⑦ 复用功能的推挽输出_AF_PP

⑧ 复用功能的开漏输出_AF_OD

1.1 I/O口的输出模式下。有3种输出速度可选(2MHz、10MHz和50MHz)，这个速度是指I/O口驱动电路的响应速度而不是输出信号的速度，输出信号的速度与程序有关(芯片内部在I/O口 的输出部分安排了多个响应速度不同的输出驱动电路，用户能够依据自己的须要选择合适的驱动电路)。通过选择速度来选择不同的输出驱动模块。达到最佳的噪声 控制和减少功耗的目的。

高频的驱动电路。噪声也高，当不须要高的输出频率时，请选用低频驱动电路，这样非常有利于提高系统的EMI性能。

当然假设要输出较高频率的信号，但却选用了较低频率的驱动模块。非常可能会得到失真的输出信号。

关键是GPIO的引脚速度跟应用匹配(推荐10倍以上)。比方：

1.1.1 对于串口，假如最大波特率仅仅需115.2k，那么用2M的GPIO的引脚速度就够了，既省电也噪声小。

1.1.2 对于I2C接口。假如使用400k波特率，若想把余量留大些，那么用2M的GPIO的引脚速度也许不够，这时能够选用10M的GPIO引脚速度。
 
1.1.3 对于SPI接口，假如使用18M或9M波特率，用10M的GPIO的引脚速度显然不够了。须要选用50M的GPIO的引脚速度。

在STM32中选用IO模式

　　（1） 浮空输入_IN_FLOATING ——浮空输入，可以做KEY识别，RX1

　　（2）带上拉输入_IPU——IO内部上拉电阻输入

　　（3）带下拉输入_IPD—— IO内部下拉电阻输入

　　（4） 模拟输入_AIN ——应用ADC模拟输入，或者低功耗下省电

　　（5）开漏输出_OUT_OD ——IO输出0接GND，IO输出1，悬空，需要外接上拉电阻，才能实现输出高电平。当输出为1时，IO口的状态由上拉电阻拉高电平，但由于是开漏输出模式，这样IO口也就可以由外部电路改变为低电平或不变。可以读IO输入电平变化，实现C51的IO双向功能

　　（6）推挽输出_OUT_PP ——IO输出0-接GND， IO输出1 -接VCC，读输入值是未知的

　　（7）复用功能的推挽输出_AF_PP ——片内外设功能（I2C的SCL，SDA）

　　（8）复用功能的开漏输出_AF_OD——片内外设功能（TX1，MOSI，MISO.SCK.SS）
